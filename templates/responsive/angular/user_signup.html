{% extends base_template %}

{% block appmenu %}
{% include './home_left_nav.html' %}
{% endblock %}

{% block pagecontent %}
<div class="page_body" >
	<div class="ui-bar-tbb">
		<h3>Sign Up</h3>
	</div>
	<div class="ui-body" >
		<div class="ui-errors" >
		{% for error in form.errors %}
			{{error}} <br />
		{% endfor %}
		</div>
		<form action="/user/signup-register/" method="POST" class="ajax-form signup-form">
			{% csrf_token %}
			<table class="form-table" >	
				<tr><td>Full Name* : </td><td><input type="text" name="name" class="ui-input" placeholder="Full Name" />
				</tr>
				<tr><td>Email* : </td><td><input type="text" name="email" class="ui-input" placeholder="Email Id" /></td>
				</tr>

				<tr><td>Password* : </td><td><input type="password" name="pass" class="ui-input" placeholder="Password" />
				</td></tr>
				<tr><td>Phone* : </td><td><input type="text" name="phone" class="ui-input" placeholder="Phone Number" />
				</tr>
				<tr><td></td>
				<td>
				<input type="submit" name="signup" value="Sign Up" class="ui-btn" />
				</td></tr>
			</table>
		</form>
	</div>
</div>
<script type="text/javascript">
$(function() {
	console.log('fetching login handler');
	$('.signup-form').data('handlers', {before: beforeSignUp, after: afterSignUp});
});

function beforeSignUp(e) {
	console.log("+beforeSignUp");
}

function afterSignUp(e) {
	console.log("+afterSignUp");
	if (e.status == false) {
		var errors = '';
		for (var key in e.result.error) {
			console.log(key);
			console.log(e.result.error[key])
			errors += e.result.error[key]+'<br />';
		}
		$('.ui-errors').html(errors);
	}
}
</script>
{% endblock %}