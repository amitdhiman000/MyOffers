{% extends base_template %}
{% load static %}

{% block pagemenu %}
{% include './home_left_nav.html' %}
{% endblock %}

{% block content %}
<div class="app_page" >
	<div class="ui-bar-tbb">
		<h3>Sign In</h3>
	</div>	
	<div class="ui-body" >
		<div class="ui-errors">
			{% for error in form_errors %}
				{{error}}<br />
			{% endfor %}
		</div>
		<form action="/user/signin-auth/" method="POST" class="ajax-form signin-form" >
			{% csrf_token %}
			<table class="form-table">
				<tr><td>Email : </td><td><input type="text" name="email" class="ui-input" placeholder="Email id" /></td></tr>
				<tr><td>Password : </td><td><input type="password" name="pass" class="ui-input" placeholder="Password" /></td></tr>
				<tr><td></td>
				<td><input type="submit" name="signin" value="Sign In" class="ui-btn" />
				</td></tr>
			</table>
		</form>
	</div>
</div>
<script type="text/javascript">
$(function() {
	$('.signin-form').data('handlers', {before: beforeSignIn, after: afterSignIn});
});

function beforeSignIn(e) {
	console.log("+beforeSignIn");
}

function afterSignIn(e,status, result) {
	console.log("+afterSignIn");
	if (e.status == false) {
		var errors = '';
		for (var key in e.result.error) {
			console.log(key);
			console.log(e.result.error[key])
			errors += e.result.error[key]+'<br />';
		}
		$('.ui-errors').html(errors);
	}
}
</script>

{% endblock %}